# Task 1

Added `/visits` functionality.

![](/k8s/screenshots/visits.jpg)

# Task 2

I added files `config.json` and `configMap.yaml`, updated `deployment.yaml`.

Also I had to modify the command to access the volume as my Dockerfile creates a workdir `app` inside which everything happens

```
rostislav@rostislavpc:~/devops_labs/k8s$ helm secrets install updated-helm-app ./helm-app/ -n default -f ./secrets.yaml
[helm-secrets] Decrypt: ./secrets.yaml
NAME: updated-helm-app
LAST DEPLOYED: Tue Apr 23 17:37:04 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=helm-app,app.kubernetes.io/instance=updated-helm-app" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT

[helm-secrets] Removed: ./secrets.yaml.dec
rostislav@rostislavpc:~/devops_labs/k8s$ kubectl get po
NAME                                       READY   STATUS    RESTARTS      AGE
flask-server-deployment-68959b4dfb-6r845   1/1     Running   5 (80m ago)   21d
flask-server-deployment-68959b4dfb-85c8w   1/1     Running   6 (74m ago)   21d
flask-server-deployment-68959b4dfb-gmpmc   1/1     Running   6 (74m ago)   21d
updated-helm-app-c88895886-l4chb           1/1     Running   0             34s
rostislav@rostislavpc:~/devops_labs/k8s$ kubectl exec updated-helm-app-c88895886-l4chb -- cat ../config.json
{"testconfig": "success"}
```

![](/k8s/screenshots/updated.jpg)